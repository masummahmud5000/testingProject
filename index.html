<!DOCTYPE html>
<html lang="bn">
<head>
<meta charset="UTF-8">
<title>Masum Software Limited</title>
<style>
body { font-family: Arial, sans-serif; background: #f4f6f9; padding: 20px; }
h2 { text-align: center; color: #333; margin-bottom: 15px; }
h1 { text-align: center; color: red; }

.today-date { text-align: center; background: green; color: white; padding: 8px; border-radius: 8px; max-width: 200px; margin: 10px auto; font-weight: bold; }
.form-box { background: #fff; padding: 20px; border-radius: 15px; box-shadow: 0 3px 10px rgba(0,0,0,0.1); max-width: 650px; margin: auto; }
.form-grid { display: grid; grid-template-columns: repeat(auto-fit, minmax(200px, 1fr)); gap: 12px; }

.search-box { display: grid; grid-template-columns: repeat(auto-fit, minmax(150px, 1fr)); gap: 10px; margin-bottom: 15px; }
input, select { padding: 10px; border: 1px solid #ddd; border-radius: 8px; font-size: 14px; width: 100%; box-sizing: border-box; }
button { grid-column: span 2; padding: 12px; background: linear-gradient(90deg, #28a745, #218838); color: #fff; cursor: pointer; font-weight: bold; border: none; border-radius: 8px; font-size: 15px; transition: 0.3s; }
button:hover { background: linear-gradient(90deg, #218838, #1c7430); }

.summary, .system-summary { max-width: 650px; margin: 10px auto; padding: 15px; background: #fff; border-radius: 12px; box-shadow: 0 2px 8px rgba(0,0,0,0.15); font-size: 15px; font-weight: bold; text-align: center; display: flex; justify-content: space-around; flex-wrap: wrap; gap: 10px; }
.cards { max-width: 650px; margin: 20px auto; }
.card { background: #fff; padding: 14px; border-radius: 12px; box-shadow: 0 2px 8px rgba(0,0,0,0.15); font-size: 13px; margin-bottom: 10px; position: relative; cursor: pointer; }
.card.selected { border: 2px solid red; }
.card h3 { margin: 0; font-size: 16px; color: #333; margin-bottom: 5px; }
.card p { margin: 3px 0; color: #222; font-weight: 500; }
.status { font-weight: bold; padding: 4px 10px; border-radius: 6px; font-size: 12px; display: inline-block; }
.pending { background: #ffc107; color: #000; }
.paid { background: #28a745; color: #fff; }
.loss-text { color: red; font-weight: bold; }
.actions { margin-top: 10px; }
.action-btn { background: #007bff; border: none; color: white; padding: 6px 10px; cursor: pointer; border-radius: 6px; font-size: 12px; margin-right: 4px; }
.delete-btn { background: #dc3545; }

/* ‡¶è‡¶∞‡¶ø‡¶Ø‡¶º‡¶æ ‡¶¨‡ßç‡¶Ø‡¶æ‡¶ï‡¶ó‡ßç‡¶∞‡¶æ‡¶â‡¶®‡ßç‡¶° */
.area-2nb { background: #d9f0ff; }       
.area-ansar { background: #d4f8d4; }     
.area-master { background: #ffe5b4; }    
.area-aman { background: #f2e1ff; }      
.area-shreepur { background: #ffd6e7; }  
.area-aspara { background: #e0f7fa; }    
.area-other { background: #f5f5f5; }  
.area-input { background: #e6ffe6; }  
.area-out { background: #ffe6e6; }  
</style>
</head>
<body>
  <h1>Admin GM</h1>
<marquee><h2>‡¶Æ‡¶æ‡¶∏‡ßÅ‡¶Æ ‡¶Æ‡¶æ‡¶π‡¶Æ‡ßÅ‡¶¶ ‡¶∏‡¶´‡¶ü‡¶ì‡¶Ø‡¶º‡¶æ‡¶∞ ‡¶´‡¶æ‡¶â‡¶®‡ßç‡¶°‡ßá‡¶∂‡¶® || Masum Mahmud Software Foundation</h2></marquee>
<h2>üê£ ‡¶Æ‡ßá‡¶∏‡¶æ‡¶∞‡ßç‡¶∏ ‡¶Æ‡¶æ‡¶∏‡ßÅ‡¶¶ ‡¶ü‡ßç‡¶∞‡ßá‡¶°‡¶æ‡¶∞‡ßç‡¶∏ </h2>

<div class="today-date" id="todayDate"></div>

<!-- üîç ‡¶∏‡¶æ‡¶∞‡ßç‡¶ö ‡¶¨‡¶ï‡ßç‡¶∏ -->
<div class="form-box search-box">
  <input type="date" id="searchDate">
  <input type="text" id="searchName" placeholder="‡¶ï‡ßç‡¶∞‡ßá‡¶§‡¶æ‡¶∞ ‡¶®‡¶æ‡¶Æ ‡¶¶‡¶ø‡ßü‡ßá ‡¶∏‡¶æ‡¶∞‡ßç‡¶ö ‡¶ï‡¶∞‡ßÅ‡¶®">
  <select id="searchArea">
    <option value="">‡¶∏‡¶¨ ‡¶è‡¶∞‡¶ø‡¶Ø‡¶º‡¶æ</option>
    <option value="‡ß®‡¶®‡¶Ç ‡¶∏‡¶ø ‡¶è‡¶®‡ßç‡¶° ‡¶¨‡¶ø">‡ß®‡¶®‡¶Ç ‡¶∏‡¶ø ‡¶è‡¶®‡ßç‡¶° ‡¶¨‡¶ø</option>
    <option value="‡¶Ü‡¶®‡¶∏‡¶æ‡¶∞ ‡¶∞‡ßã‡¶°">‡¶Ü‡¶®‡¶∏‡¶æ‡¶∞ ‡¶∞‡ßã‡¶°</option>
    <option value="‡¶Æ‡¶æ‡¶∏‡ßç‡¶ü‡¶æ‡¶∞ ‡¶¨‡¶æ‡¶°‡¶º‡¶ø">‡¶Æ‡¶æ‡¶∏‡ßç‡¶ü‡¶æ‡¶∞ ‡¶¨‡¶æ‡¶°‡¶º‡¶ø</option>
    <option value="‡¶Ü‡¶Æ‡¶æ‡¶® ‡¶∏‡¶Ç‡¶≤‡¶ó‡ßç‡¶®">‡¶Ü‡¶Æ‡¶æ‡¶® ‡¶∏‡¶Ç‡¶≤‡¶ó‡ßç‡¶®</option>
    <option value="‡¶∂‡ßç‡¶∞‡ßÄ‡¶™‡ßÅ‡¶∞">‡¶∂‡ßç‡¶∞‡ßÄ‡¶™‡ßÅ‡¶∞</option>
    <option value="‡¶Ü‡¶∏‡¶™‡¶æ‡¶°‡¶º‡¶æ">‡¶Ü‡¶∏‡¶™‡¶æ‡¶°‡¶º‡¶æ</option>
    <option value="‡¶Ö‡¶®‡ßç‡¶Ø‡¶æ‡¶®‡ßç‡¶Ø">‡¶Ö‡¶®‡ßç‡¶Ø‡¶æ‡¶®‡ßç‡¶Ø</option>
    <option value="‡¶è‡¶ñ‡¶æ‡¶®‡ßá ‡¶™‡ßç‡¶∞‡¶≤‡¶ü‡¶ø">üü¢ ‡¶è‡¶ñ‡¶æ‡¶®‡ßá ‡¶™‡ßç‡¶∞‡¶≤‡¶ü‡¶ø</option>
    <option value="‡¶è‡¶ñ‡¶æ‡¶®‡ßá ‡¶°‡¶ø‡¶Æ ‡¶®‡ßá‡¶Æ‡ßá‡¶õ‡ßá">üî¥ ‡¶è‡¶ñ‡¶æ‡¶®‡ßá ‡¶°‡¶ø‡¶Æ ‡¶®‡ßá‡¶Æ‡ßá‡¶õ‡ßá</option>
  </select>
  <select id="searchStatus">
    <option value="">‡¶∏‡¶¨ ‡¶¶‡ßá‡¶ñ‡¶æ‡¶ì</option>
    <option value="Pending">Pending</option>
    <option value="Paid">Paid</option>
  </select>
  <button style="background:#007bff;" onclick="searchRecords()">üîç ‡¶∏‡¶æ‡¶∞‡ßç‡¶ö</button>
  <button style="background:#6c757d;" onclick="resetSearch()">‚ôªÔ∏è Reset</button>
</div>

<!-- üìã ‡¶´‡¶∞‡ßç‡¶Æ -->
<div class="form-box">
  <div class="form-grid">
    <input type="text" id="name" placeholder="‡¶ï‡ßç‡¶∞‡ßá‡¶§‡¶æ‡¶∞ ‡¶®‡¶æ‡¶Æ">
    <input type="number" id="eggs" placeholder="‡¶ï‡¶§ ‡¶°‡¶ø‡¶Æ">
    <input type="number" id="rate" placeholder="‡¶∞‡ßá‡¶ü">
    <button style="grid-column: span 1; background:#6f42c1;" onclick="saveRate()">üíæ Save Rate</button>
    <select id="area" onchange="toggleRateBox()">
      <option value="‡ß®‡¶®‡¶Ç ‡¶∏‡¶ø ‡¶è‡¶®‡ßç‡¶° ‡¶¨‡¶ø">‡ß®‡¶®‡¶Ç ‡¶∏‡¶ø ‡¶è‡¶®‡ßç‡¶° ‡¶¨‡¶ø</option>
      <option value="‡¶Ü‡¶®‡¶∏‡¶æ‡¶∞ ‡¶∞‡ßã‡¶°">‡¶Ü‡¶®‡¶∏‡¶æ‡¶∞ ‡¶∞‡ßã‡¶°</option>
      <option value="‡¶Æ‡¶æ‡¶∏‡ßç‡¶ü‡¶æ‡¶∞ ‡¶¨‡¶æ‡¶°‡¶º‡¶ø">‡¶Æ‡¶æ‡¶∏‡ßç‡¶ü‡¶æ‡¶∞ ‡¶¨‡¶æ‡¶°‡¶º‡¶ø</option>
      <option value="‡¶Ü‡¶Æ‡¶æ‡¶® ‡¶∏‡¶Ç‡¶≤‡¶ó‡ßç‡¶®">‡¶Ü‡¶Æ‡¶æ‡¶® ‡¶∏‡¶Ç‡¶≤‡¶ó‡ßç‡¶®</option>
      <option value="‡¶∂‡ßç‡¶∞‡ßÄ‡¶™‡ßÅ‡¶∞">‡¶∂‡ßç‡¶∞‡ßÄ‡¶™‡ßÅ‡¶∞</option>
      <option value="‡¶Ü‡¶∏‡¶™‡¶æ‡¶°‡¶º‡¶æ">‡¶Ü‡¶∏‡¶™‡¶æ‡¶°‡¶º‡¶æ</option>
      <option value="‡¶Ö‡¶®‡ßç‡¶Ø‡¶æ‡¶®‡ßç‡¶Ø">‡¶Ö‡¶®‡ßç‡¶Ø‡¶æ‡¶®‡ßç‡¶Ø</option>
      <option value="‡¶è‡¶ñ‡¶æ‡¶®‡ßá ‡¶™‡ßç‡¶∞‡¶≤‡¶ü‡¶ø">üü¢ ‡¶è‡¶ñ‡¶æ‡¶®‡ßá ‡¶™‡ßç‡¶∞‡¶≤‡¶ü‡¶ø</option>
      <option value="‡¶è‡¶ñ‡¶æ‡¶®‡ßá ‡¶°‡¶ø‡¶Æ ‡¶®‡ßá‡¶Æ‡ßá‡¶õ‡ßá">üî¥ ‡¶è‡¶ñ‡¶æ‡¶®‡ßá ‡¶°‡¶ø‡¶Æ ‡¶®‡ßá‡¶Æ‡ßá‡¶õ‡ßá</option>
    </select>
    <input type="text" id="customArea" placeholder="‡¶è‡¶ñ‡¶æ‡¶®‡ßá ‡¶è‡¶∞‡¶ø‡¶Ø‡¶º‡¶æ ‡¶≤‡¶ø‡¶ñ‡ßÅ‡¶®" style="display:none;">
    <select id="status" onchange="togglePaidBox()">
      <option value="Pending">Pending</option>
      <option value="Paid">Paid</option>
    </select>
    <input type="number" id="receivedAmount" placeholder="‡¶ï‡¶§ ‡¶ü‡¶æ‡¶ï‡¶æ" style="display:none;">
    <button onclick="addRecord()">‚ûï ‡¶π‡¶ø‡¶∏‡¶æ‡¶¨ ‡¶Ø‡ßã‡¶ó ‡¶ï‡¶∞‡ßÅ‡¶®</button>
  </div>
</div>

<div class="summary">
  <div>Pending: <span id="pendingTotal">0</span>‡ß≥</div>
  <div>Paid: <span id="paidTotal">0</span>‡ß≥</div>
</div>

<div class="system-summary">
  <div>‡¶Æ‡ßã‡¶ü ‡¶ï‡ßç‡¶∞‡ßá‡¶§‡¶æ: <span id="buyerCount">0</span> ‡¶ú‡¶®</div>
  <div>‡¶Æ‡ßã‡¶ü ‡¶°‡¶ø‡¶Æ: <span id="eggCount">0</span> ‡¶ü‡¶ø</div>
  <div style="color:red;">‡¶Æ‡ßã‡¶ü ‡¶≤‡¶∏: <span id="lossAmount">0</span>‡ß≥</div>
</div>

<button style="background:#dc3545; display:none;" id="deleteSelectedBtn" onclick="deleteSelected()">üóëÔ∏è ‡¶∏‡¶ø‡¶≤‡ßá‡¶ï‡ßç‡¶ü‡ßá‡¶° ‡¶°‡¶ø‡¶≤‡ßá‡¶ü</button>

<div class="cards" id="cardContainer"></div>

<script>
let records = JSON.parse(localStorage.getItem("records")) || [];
let editIndex = -1;
let selectedCards = new Set();
let savedRate = localStorage.getItem("savedRate") || "";

if(savedRate) document.getElementById("rate").value = savedRate;

function saveRate(){
  const r=document.getElementById("rate").value;
  if(r){
    localStorage.setItem("savedRate",r);
    alert("‚úÖ ‡¶∞‡ßá‡¶ü ‡¶∏‡ßá‡¶≠ ‡¶π‡ßü‡ßá‡¶õ‡ßá!");
  }
}

function toggleRateBox(){
  const area=document.getElementById("area").value;
  const rateBox=document.getElementById("rate");
  const customAreaBox=document.getElementById("customArea");
  rateBox.disabled=(area==="‡¶è‡¶ñ‡¶æ‡¶®‡ßá ‡¶™‡ßç‡¶∞‡¶≤‡¶ü‡¶ø"||area==="‡¶è‡¶ñ‡¶æ‡¶®‡ßá ‡¶°‡¶ø‡¶Æ ‡¶®‡ßá‡¶Æ‡ßá‡¶õ‡ßá");
  if(rateBox.disabled) rateBox.value="";
  if(area==="‡¶Ö‡¶®‡ßç‡¶Ø‡¶æ‡¶®‡ßç‡¶Ø") customAreaBox.style.display="block";
  else { customAreaBox.style.display="none"; customAreaBox.value=""; }
}

function togglePaidBox(){
  const status=document.getElementById("status").value;
  document.getElementById("receivedAmount").style.display=(status==="Paid")?"block":"none";
}

function addRecord(){
  const name=document.getElementById("name").value.trim();
  const eggs=parseFloat(document.getElementById("eggs").value)||0;
  const rate=parseFloat(document.getElementById("rate").value)||0;
  let area=document.getElementById("area").value;
  if(area==="‡¶Ö‡¶®‡ßç‡¶Ø‡¶æ‡¶®‡ßç‡¶Ø") area=document.getElementById("customArea").value.trim() || "‡¶Ö‡¶®‡ßç‡¶Ø‡¶æ‡¶®‡ßç‡¶Ø";
  const status=document.getElementById("status").value;
  const received=document.getElementById("receivedAmount").value;

  let date,time;
  if(editIndex>-1){ date=records[editIndex].date; time=records[editIndex].time; }
  else {
    const now=new Date();
    date=`${String(now.getDate()).padStart(2,"0")}/${String(now.getMonth()+1).padStart(2,"0")}/${now.getFullYear()}`;
    time=now.toLocaleTimeString("us-US",{hour:'2-digit',minute:'2-digit',hour12:true});
  }
  const total=(area==="‡¶è‡¶ñ‡¶æ‡¶®‡ßá ‡¶™‡ßç‡¶∞‡¶≤‡¶ü‡¶ø"||area==="‡¶è‡¶ñ‡¶æ‡¶®‡ßá ‡¶°‡¶ø‡¶Æ ‡¶®‡ßá‡¶Æ‡ßá‡¶õ‡ßá")?0:((rate/100)*eggs).toFixed(2);
  const record={name,eggs,rate,area,status,received,total,date,time};
  if(editIndex>-1){ records[editIndex]=record; editIndex=-1; }
  else { records.unshift(record); }

  localStorage.setItem("records",JSON.stringify(records));
  clearForm();
  renderCards();
}

function editRecord(index){
  const rec=records[index];
  document.getElementById("name").value=rec.name;
  document.getElementById("eggs").value=rec.eggs;
  document.getElementById("rate").value=rec.rate;
  document.getElementById("area").value=rec.area;
  document.getElementById("status").value=rec.status;
  toggleRateBox();
  togglePaidBox();
  document.getElementById("receivedAmount").value=rec.received||"";
  editIndex=index;
  window.scrollTo({top:0,behavior:"smooth"});
}

function deleteRecord(index){
  if(confirm("‡¶Ü‡¶™‡¶®‡¶ø ‡¶ï‡¶ø ‡¶°‡¶ø‡¶≤‡ßá‡¶ü ‡¶ï‡¶∞‡¶§‡ßá ‡¶ö‡¶æ‡¶®?")){
    records.splice(index,1);
    localStorage.setItem("records",JSON.stringify(records));
    renderCards();
  }
}

function deleteSelected(){
  if(selectedCards.size===0) return;
  if(confirm("‡¶®‡¶ø‡¶∞‡ßç‡¶¨‡¶æ‡¶ö‡¶ø‡¶§ ‡¶ï‡¶æ‡¶∞‡ßç‡¶° ‡¶°‡¶ø‡¶≤‡ßá‡¶ü ‡¶ï‡¶∞‡¶§‡ßá ‡¶ö‡¶æ‡¶®?")){
    records=records.filter((_,i)=>!selectedCards.has(i));
    selectedCards.clear();
    document.getElementById("deleteSelectedBtn").style.display="none";
    localStorage.setItem("records",JSON.stringify(records));
    renderCards();
  }
}

function clearForm(){
  document.getElementById("name").value="";
  document.getElementById("eggs").value="";
  document.getElementById("rate").value=savedRate;
  document.getElementById("area").value="‡ß®‡¶®‡¶Ç ‡¶∏‡¶ø ‡¶è‡¶®‡ßç‡¶° ‡¶¨‡¶ø";
  document.getElementById("customArea").value="";
  document.getElementById("status").value="Pending";
  document.getElementById("receivedAmount").value="";
  toggleRateBox();
  togglePaidBox();
}

function toggleSelect(index,card){
  if(selectedCards.has(index)){
    selectedCards.delete(index);
    card.classList.remove("selected");
  } else {
    selectedCards.add(index);
    card.classList.add("selected");
  }
  document.getElementById("deleteSelectedBtn").style.display=selectedCards.size>0?"block":"none";
}

function renderCards(filteredRecords=records){
  const container=document.getElementById("cardContainer");
  container.innerHTML="";
  let pendingSum=0, paidSum=0, buyerCount=0, eggCount=0, totalLoss=0;
  filteredRecords.forEach((rec,index)=>{
    if(rec.status==="Pending") pendingSum+=parseFloat(rec.total);
    if(rec.status==="Paid"&&rec.received){
      paidSum+=parseFloat(rec.received);
      totalLoss+=parseFloat(rec.total)-parseFloat(rec.received);
    }
    if(rec.area!=="‡¶è‡¶ñ‡¶æ‡¶®‡ßá ‡¶™‡ßç‡¶∞‡¶≤‡¶ü‡¶ø"&&rec.area!=="‡¶è‡¶ñ‡¶æ‡¶®‡ßá ‡¶°‡¶ø‡¶Æ ‡¶®‡ßá‡¶Æ‡ßá‡¶õ‡ßá"){
      buyerCount++; eggCount+=rec.eggs;
    }
    const card=document.createElement("div");
    card.className="card "+getAreaClass(rec.area);
    card.oncontextmenu=(e)=>{e.preventDefault(); toggleSelect(index,card);};
    card.innerHTML=`
      <h3>${rec.name} ‡¶≠‡¶æ‡¶á</h3>
      <p>Area: ${rec.area}</p>
      <p>Egg: ${rec.eggs}</p>
      <p>Rate: ${rec.rate||"-"}${rec.rate?"‡ß≥ (Per 100)":""}</p>
      <p>Total: <b>${rec.total}‡ß≥</b></p>
      ${rec.status==="Paid"&&rec.received?`<p>Receive Tk: <b>${rec.received}‡ß≥</b> <span class="loss-text">(${(rec.total-rec.received).toFixed(2)}‡ß≥ ‡¶≤‡¶∏)</span></p>`:""}
      <p>Time: ${rec.time}</p>
      <span class="status ${rec.status==="Paid"?"paid":"pending"}">${rec.status}</span>
      <div class="actions">
        <button class="action-btn" onclick="editRecord(${index})">‚úèÔ∏è ‡¶è‡¶°‡¶ø‡¶ü</button>
        <button class="action-btn delete-btn" onclick="deleteRecord(${index})">üóëÔ∏è ‡¶°‡¶ø‡¶≤‡ßá‡¶ü</button>
      </div>`;
    container.appendChild(card);
  });

  document.getElementById("pendingTotal").textContent=pendingSum.toFixed(2);
  document.getElementById("paidTotal").textContent=paidSum.toFixed(2);
  document.getElementById("buyerCount").textContent=buyerCount;
  document.getElementById("eggCount").textContent=eggCount;
  document.getElementById("lossAmount").textContent=totalLoss.toFixed(2);
}

function searchRecords(){
  const date=document.getElementById("searchDate").value;
  const name=document.getElementById("searchName").value.trim();
  const area=document.getElementById("searchArea").value;
  const status=document.getElementById("searchStatus").value;

  const filtered=records.filter(r=>{
    return (!date||r.date.includes(date.split("-").reverse().join("/"))) &&
           (!name||r.name.includes(name)) &&
           (!area||r.area===area) &&
           (!status||r.status===status);
  });

  renderCards(filtered);
}

function resetSearch(){
  document.getElementById("searchDate").value="";
  document.getElementById("searchName").value="";
  document.getElementById("searchArea").value="";
  document.getElementById("searchStatus").value="";
  renderCards();
}

function getAreaClass(area){
  switch(area){
    case "‡ß®‡¶®‡¶Ç ‡¶∏‡¶ø ‡¶è‡¶®‡ßç‡¶° ‡¶¨‡¶ø":return "area-2nb";
    case "‡¶Ü‡¶®‡¶∏‡¶æ‡¶∞ ‡¶∞‡ßã‡¶°":return "area-ansar";
    case "‡¶Æ‡¶æ‡¶∏‡ßç‡¶ü‡¶æ‡¶∞ ‡¶¨‡¶æ‡¶°‡¶º‡¶ø":return "area-master";
    case "‡¶Ü‡¶Æ‡¶æ‡¶® ‡¶∏‡¶Ç‡¶≤‡¶ó‡ßç‡¶®":return "area-aman";
    case "‡¶∂‡ßç‡¶∞‡ßÄ‡¶™‡ßÅ‡¶∞":return "area-shreepur";
    case "‡¶Ü‡¶∏‡¶™‡¶æ‡¶°‡¶º‡¶æ":return "area-aspara";
    case "‡¶Ö‡¶®‡ßç‡¶Ø‡¶æ‡¶®‡ßç‡¶Ø":return "area-other";
    case "‡¶è‡¶ñ‡¶æ‡¶®‡ßá ‡¶™‡ßç‡¶∞‡¶≤‡¶ü‡¶ø":return "area-input";
    case "‡¶è‡¶ñ‡¶æ‡¶®‡ßá ‡¶°‡¶ø‡¶Æ ‡¶®‡ßá‡¶Æ‡ßá‡¶õ‡ßá":return "area-out";
    default:return "";
  }
}

document.getElementById("todayDate").textContent=new Date().toLocaleDateString("bn-BD",{weekday:'long',year:'numeric',month:'long',day:'numeric'});
renderCards();
toggleRateBox();
togglePaidBox();
</script>
</body>
</html>
